
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Controlling a Solenoid</title> 
<meta name="author" content="CoActionOS, Inc">

<!-- Enable responsive viewport -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<!-- Le styles -->
<link href="/assets/themes/twitter/bootstrap3/css/bootstrap.min.css" rel="stylesheet">
<script src="/assets/themes/twitter/bootstrap3/js/jquery-2.0.3.min.js"></script>
<script src="/assets/themes/twitter/bootstrap3/js/bootstrap.min.js"></script>
<link href="/assets/themes/twitter/bootstrap3/css/font-awesome.min.css" rel="stylesheet">
<link href="/assets/themes/twitter/css/style.css" rel="stylesheet">
<link href="/assets/themes/twitter/css/syntax.css" rel="stylesheet">

<!-- Le fav and touch icons -->
<!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

<!-- atom & rss feed -->
<link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
<link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

</head>

<body style="min-height: 200px; padding-top: 50px;">

	<header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role="banner">
		<div class="container">
			<div class="row">
				<div class="col-md-offset-1 col-md-10">
					<div class="navbar-header">
						<button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".menu-navbar-collapse">
							<span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="/index.html">
							<img style="height: 22px;" src="/images/CoActionOS-Logo.svg" />
						</a>
					</div>

					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse menu-navbar-collapse" role="navigation">
						<ul class="nav navbar-nav">
							<li><a href="#"><i class="fa fa-phone"></i> Services</a></li>
							<li><a href="https://github.com/CoActionOS"><i class="fa fa-code-fork"></i> Code</a></li>
							<li><a href="/downloads.html"><i class="fa fa-cloud-download"></i> Downloads</a></li>
							<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-file-text-o"></i> Docs <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li><a href="/coactionos/html/">CoActionOS</a></li>
									<li><a href="/coactionos-applib/html/">CoActionOS Applib</a></li>
								</ul>
							</li>
							<li><a href="/tips.html"><i class="fa fa-lightbulb-o"></i> Design Tips</a></li>
						</ul>
						<ul class="nav navbar-nav navbar-right">
							<li><a href="#"><i class="fa fa-info-circle"></i> About</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</header>

	<div class="content" id="content">
		<div class="container">
			<div class="row" style="margin-top: 20px;">
				<div class="col-md-offset-1 col-md-7 panel panel-default"><div class="panel-body">
<div class="page-header">
	<h1>
		Controlling a Solenoid <small>Solenoid Control</small>
	</h1>
</div>

<div class="content"><p><img class='post_image' src='/images/solenoid-ckt.png' /></p>

<p>Many products use solenoids to open and close valves. A microcontroller can control solenoids programmatically using a GPIO pin and a simple circuit.</p>

<h2 id="circuit">Circuit</h2>

<p>A solenoid can be enabled using a simple transistor circuit and a microcontroller. The circuit above shows a solenoid, MOSFET transistor, diode, and a microcontroller GPIO signal. To activate the solenoid, the microcontroller GPIO signal goes high causing the MOSFET to turn on. When on, the MOSFET allows current to flow from the power supply through the solenoid and to ground. The voltage rating for the solenoid dictates the voltage of the power supply (it is OK if the power supply voltage is different from the microcontroller voltage). The MOSFET should be selected to handle sufficient current to activate the solenoid as specified in the solenoid’s datasheet.</p>

<p>Because the solenoid is an inductive device, the diode is added to protect the MOSFET. When the solenoid turns off, the current through the solenoid rapidly drops from the nominal value to zero. Since the voltage drop across the solenoid is proportional to the change in current (see equation below), the current drop creates a voltage spike which can damage the MOSFET. The diode prevents the voltage spike from reaching damaging levels by directing the current back to the power supply.</p>

<p>!formula1.png!</p>

<h2 id="firmware_considerations">Firmware Considerations</h2>

<p>Controlling the solenoid in firmware is a straightforward operation with one exception. As mentioned, driving the GPIO high will turn the solenoid on, while driving it low will turn it off. However, there is a small amount of time while the microcontroller starts up where the solenoid may open unexpectedly. For example, if the default GPIO configuration is to have an internal pull-up activated, the solenoid will be activated while the microcontroller is starting u To avoid this behavior, an external pull-down resistor can be added to the GPIO line (shown below) to ensure the solenoid stays off during microcontroller initialization.</p>

<p>!{width:40%}solenoid-pulldown-ckt.png!</p>

<h2 id="conclusion">Conclusion</h2>

<p>Controlling solenoids with microcontrollers is simple. Remember to ensure the MOSFET has sufficient current capability to activate the solenoid, include the protection diode to prevent the solenoid from damaging the MOSFET, and include a pull-down resistor on the GPIO line if the microcontroller doesn’t drive the line low at startup.</p></div>

<hr>

<ul class="nav nav-pills">
	
	


  
     
    	<li><a href="/tags.html#embedded-ref">embedded <span class="badge">12</span></a></li>
     
    	<li><a href="/tags.html#tips-ref">tips <span class="badge">12</span></a></li>
     
    	<li><a href="/tags.html#control-ref">control <span class="badge">1</span></a></li>
    
  



</ul>


<div class="pagination">
	<center>
		 <a href="/c-tutorial/2013/12/11/Embedded-C-Tutorial-Order-of-Operations" type="button" class="btn btn-primary"><i
			class="fa fa-arrow-left"></i></a>  <a href="/archive.html" type="button" class="btn btn-primary"><i class="fa fa-archive"></i></a> 
		 <a href="/embedded/2013/12/14/Tips-Using-Op-Amps-in-Embedded-Design" type="button" class="btn btn-primary"><i class="fa fa-arrow-right"></i></a>
		
	</center>
</div>


</div></div>
				<div class="col-md-3">
				

					<h3>embedded</h3>
					<ul class="nav nav-pills nav-stacked">
						  
						


  
    
      
      	
      	<li class="active"><a href="/embedded/2013/12/14/Tips-Controlling-a-Solenoid" class="active">Controlling a Solenoid</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/embedded/2013/12/14/Tips-Using-Op-Amps-in-Embedded-Design">Using Op Amps in Embedded Design</a></li>
      	
      
    
  



					</ul>
					
					
						<h3>Embedded C Tutorial</h3>
						<ul class="nav nav-pills nav-stacked">
							  
							


  
    
      
      	
      	<li><a href="/c-tutorial/2013/12/01/Embedded-C-Tutorial-Hello-World">Hello World</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/c-tutorial/2013/12/02/Embedded-C-Tutorial-Functions">Functions</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/c-tutorial/2013/12/03/Embedded-C-Tutorial-Raw-Types">Raw Types</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/c-tutorial/2013/12/04/Embedded-C-Tutorial-Operators">Operators</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/c-tutorial/2013/12/05/Embedded-C-Tutorial-Flow-Control">Flow Control</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/c-tutorial/2013/12/07/Embedded-C-Tutorial-Pointers-and-Arrays">Pointers and Arrays</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/c-tutorial/2013/12/08/Embedded-C-Tutorial-Preprocessor">Preprocessor Directives</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/c-tutorial/2013/12/09/Embedded-C-Tutorial-Compound-Data-Types">Compound Data Types</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/c-tutorial/2013/12/10/Embedded-C-Tutorial-Keyword-Reference">Keywords Reference</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/c-tutorial/2013/12/11/Embedded-C-Tutorial-Order-of-Operations">Order of Operations Reference</a></li>
      	
      
    
  



						</ul>
					
					
					
 				  
				</div>
			</div>

		</div>
	</div>
	<hr>
	<footer>
		<div class="container">
			<div class="row">
				<div class="col-md-offset-1 col-md-9">
					<p>&copy; 2013 CoActionOS, Inc</p>
				</div>
			</div>
		</div>
	</footer>
	
</body>
</html>

