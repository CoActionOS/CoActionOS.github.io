
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Building and Installing CoActionOS</title> 
<meta name="author" content="CoActionOS, Inc">

<!-- Enable responsive viewport -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<!-- Le styles -->
<link href="/assets/themes/twitter/bootstrap3/css/bootstrap.min.css" rel="stylesheet">
<script src="/assets/themes/twitter/bootstrap3/js/jquery-2.0.3.min.js"></script>
<script src="/assets/themes/twitter/bootstrap3/js/bootstrap.min.js"></script>
<link href="/assets/themes/twitter/bootstrap3/css/font-awesome.min.css" rel="stylesheet">
<link href="/assets/themes/twitter/css/style.css" rel="stylesheet">
<link href="/assets/themes/twitter/css/syntax.css" rel="stylesheet">

<!-- Le fav and touch icons -->
<!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

<!-- atom & rss feed -->
<link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
<link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

</head>

<body style="min-height: 200px; padding-top: 50px;">

	<header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role="banner">
		<div class="container">
			<div class="row">
				<div class="col-md-offset-1 col-md-9">
					<div class="navbar-header">
						<button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".menu-navbar-collapse">
							<span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span>
						</button>
						<a class="navbar-brand" href="/index.html">
							<img style="height: 22px;" src="/images/CoActionOS-Logo.svg" />
						</a>
					</div>

					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse menu-navbar-collapse" role="navigation">
						<ul class="nav navbar-nav">
							<li><a href="#"><i class="fa fa-phone"></i> Services</a></li>
							<li><a href="https://github.com/CoActionOS"><i class="fa fa-code-fork"></i> Code</a></li>
							<li><a href="/downloads.html"><i class="fa fa-cloud-download"></i> Downloads</a></li>
							<li><a href="/tips.html"><i class="fa fa-lightbulb-o"></i> Design Tips</a></li>
						</ul>
						<ul class="nav navbar-nav navbar-right">
							<li><a href="#"><i class="fa fa-info-circle"></i> About</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</header>

	<div class="content" id="content">
		<div class="container">
			<div class="row" style="margin-top: 20px;">
				<div class="col-md-offset-1 col-md-7 panel panel-default"><div class="panel-body">
<div class="page-header">
  <h1>Building and Installing CoActionOS <small>CoActionOS User Guide</small></h1>
</div>

<div class="row-fluid post-full">
  <div class="span12">
    <div class="date">
      <span>24 December 2013</span>
    </div>
    <div class="content">
      <h3 id="building_and_installing_coactionos_static_libraries">Building and Installing CoActionOS Static Libraries</h3>

<p>CoActionOS is built as a library. The library just needs to link to the board support package to make the final binary. To build CoActionOS, you need to download the <a href="https://github.com/CoActionOS/CoActionOS">source code</a> and import the CoActionOS project in to Eclipse. Once in Eclipse, you can right click on CoActionOS then click Build Configurations-&gt;Build All. Or you can just click the hammer icon and select the target architecture.</p>

<p>The build process will launch a script called post-process.sh (unix/linux) or post-process.bat (win32). To install correctly in unix/linux you need to make sure sudo can be run with post-process.sh. The easiest way to do this is to add the folowing line to /etc/sudoers.<br />Otherwise you can edit the ask-pass.sh program to write your password to the standard output.</p>
<pre>your_username	ALL=(ALL) NOPASSWD:ALL</pre>
<h3 id="building_and_installing_kernel_binaries">Building and Installing Kernel Binaries</h3>
<div class='alert alert-info'><span class='label label-danger'>Note</span> The latest version 
of the CoActionOS library is installed when you download and install the compiler.</div>
<p>Once the CoActionOS library is built and installed on your development system, you can build the kernel. The kernel is built by downloading a “board support package”:/redmine/projects/hardware/files and importing it in to Eclipse. With the board support package, you can modify what devices and filesystems are available on the board. For example, the CoAction Hero board support package comes with /dev/i2c0, /dev/i2c1, /dev/i2c2. If you comment out the following lines, these devices won’t be available to user applications.</p>
<div class='highlight'><pre><code class='cpp'><span class='c1'>//DEVICE_PERIPH(&quot;i2c0&quot;, hwpl_i2c, 0, 0666, USER_ROOT, GROUP_ROOT, S_IFCHR),</span>
<span class='c1'>//DEVICE_PERIPH(&quot;i2c1&quot;, hwpl_i2c, 1, 0666, USER_ROOT, GROUP_ROOT, S_IFCHR),</span>
<span class='c1'>//DEVICE_PERIPH(&quot;i2c2&quot;, hwpl_i2c, 2, 0666, USER_ROOT, GROUP_ROOT, S_IFCHR),</span>
</code></pre></div><div class='alert alert-info'><span class='label label-danger'>Note</span> If you remove 
all three I2C ports, the resulting binary will exclude the I2C driver.  However, if you 
include just one port, the resulting binary will be almost the same size as including 
all three ports.</div>
<p>The filesystems are also linked in the board support package. You can remove a filesystem by commenting it out. The / (root), /app, and /dev filesystems are required for proper operation. The /home filesystem mount if for storing files on an external flash chip and is not required for normal operation.</p>
<div class='highlight'><pre><code class='cpp'><span class='k'>const</span> <span class='kt'>sysfs_t</span> <span class='k'>const</span> <span class='n'>sysfs_list</span><span class='p'>[]</span> <span class='o'>=</span> <span class='p'>{</span>
	<span class='c1'>//the folder for ram/flash applications</span>
	<span class='n'>SYSFS_APP</span><span class='p'>(</span><span class='s'>&quot;/app&quot;</span><span class='p'>,</span> <span class='o'>&amp;</span><span class='p'>(</span><span class='n'>devices</span><span class='p'>[</span><span class='n'>MEM_DEV</span><span class='p'>]),</span> <span class='n'>SYSFS_ALL_ACCESS</span><span class='p'>),</span>
	<span class='n'>SYSFS_DEV</span><span class='p'>(</span><span class='s'>&quot;/dev&quot;</span><span class='p'>,</span> <span class='n'>devices</span><span class='p'>,</span> <span class='n'>SYSFS_READONLY_ACCESS</span><span class='p'>),</span> <span class='c1'>//devices</span>
	<span class='n'>CAFS_LITE</span><span class='p'>(</span><span class='s'>&quot;/home&quot;</span><span class='p'>,</span> <span class='o'>&amp;</span><span class='n'>cafs_lite_cfg</span><span class='p'>,</span> <span class='n'>SYSFS_ALL_ACCESS</span><span class='p'>),</span> <span class='c1'>//user files</span>
	<span class='n'>SYSFS_ROOT</span><span class='p'>(</span><span class='s'>&quot;/&quot;</span><span class='p'>,</span> <span class='n'>sysfs_list</span><span class='p'>,</span> <span class='n'>SYSFS_READONLY_ACCESS</span><span class='p'>),</span> <span class='c1'>//root</span>
	<span class='n'>SYSFS_TERMINATOR</span>
<span class='p'>};</span>
</code></pre></div>
<p>Once you have the devices and filesystems you want, you just hit the hammer in Eclipse to build the kernel binary. You can then use CoActionOS Link to install the binary.</p>
    </div>

<hr>
  
    <ul class="nav nav-pills">
      
      


  
     
    	<li><a href="/tags.html#coaction-ref">coaction <span class="badge">18</span></a></li>
     
    	<li><a href="/tags.html#user-guide-ref">user-guide <span class="badge">6</span></a></li>
    
  



    </ul>
    

    <div class="pagination">
      <center>
        
          <a href="/coactionos-tutorials/2013/12/24/CoActionOS-Tutorial-Uart" type="button" class="btn btn-primary"><i class="fa fa-arrow-left"></i></a>
        
          <a href="/archive.html" type="button" class="btn btn-primary"><i class="fa fa-archive"></i></a>
        
          <a href="/coactionos-user-guides/2013/12/24/CoActionOS-User-Guide-CoActionOS-and-Eclipse" type="button" class="btn btn-primary"><i class="fa fa-arrow-right"></i></a>
        
      </center>
    </div>
  </div>
</div>

</div></div>
				<div class="col-md-4">
				

					<h3>coactionos-user-guides</h3>
					<ul>
						  
						


  
    
      
      	
      	<li><a href="/coactionos-user-guides/2013/12/24/CoActionOS-User-Guide-Installing-Windows-Device-Drivers">Installing Windows Device Drivers</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/coactionos-user-guides/2013/12/24/CoActionOS-User-Guide-Getting-Started">Getting Started</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/coactionos-user-guides/2013/12/24/CoActionOS-User-Guide-Device-Driver-Development">Device Driver Development</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/coactionos-user-guides/2013/12/24/CoActionOS-User-Guide-Designing-Applications-using-State-Machines">Designing Applications using State Machines</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/coactionos-user-guides/2013/12/24/CoActionOS-User-Guide-CoActionOS-and-Eclipse">Developing on CoActionOS using Eclipse</a></li>
      	
      
    
  
    
      
      	
      	<li class="active"><a href="/coactionos-user-guides/2013/12/24/CoActionOS-User-Guide-Building-and-Installing-CoActionOS" class="active">Building and Installing CoActionOS</a></li>
      	
      
    
  



					</ul>
 
 				  
				</div>
			</div>

		</div>
	</div>
	<hr>
	<footer>
		<div class="container">
			<div class="row">
				<div class="col-md-offset-1 col-md-9">
					<p>&copy; 2013 CoActionOS, Inc</p>
				</div>
			</div>
		</div>
	</footer>
	
</body>
</html>

